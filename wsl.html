<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>WSL（Windows Subsystem for Linux）コマンド整理資料【拡張版】</title>
  <style>
    body { font-family: "Segoe UI", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif; line-height: 1.7; margin: 40px; }
    h1, h2, h3 { color: #2c3e50; }
    h1 { border-bottom: 3px solid #2c3e50; padding-bottom: 10px; }
    h2 { border-left: 6px solid #3498db; padding-left: 10px; margin-top: 40px; }
    h3 { margin-top: 25px; }
    table { border-collapse: collapse; width: 100%; margin: 15px 0; }
    th, td { border: 1px solid #ccc; padding: 8px 10px; text-align: left; }
    th { background-color: #f0f3f5; }
    code { background-color: #f6f8fa; padding: 2px 6px; border-radius: 4px; }
    pre { background-color: #f6f8fa; padding: 15px; overflow-x: auto; }
    ul { margin-left: 25px; }
    .note { background-color: #fff8dc; border-left: 6px solid #f1c40f; padding: 10px 15px; margin: 20px 0; }
    .warn { background-color: #ffecec; border-left: 6px solid #e74c3c; padding: 10px 15px; margin: 20px 0; }
  </style>
</head>
<body>

<h1>WSL（Windows Subsystem for Linux）コマンド整理資料【拡張版】</h1>

<p>本資料は、WSL 基本操作に加え、Docker / Podman / rsync / Zone.Identifier 対策、<br>
および Host（Windows）⇔ WSL 間のファイル転送方法を実運用向けに整理したものです。</p>

<hr>

<h2>9. WSL + Docker / Podman</h2>

<h3>9.1 Docker（WSL2連携）</h3>
<ul>
  <li>Docker Desktop は WSL2 上の Linux カーネルを利用</li>
  <li>Windows / WSL 間でソケット共有が可能</li>
</ul>

<pre><code># コンテナ一覧
docker ps -a

# イメージ一覧
docker images

# コンテナ起動
docker run -it ubuntu bash</code></pre>

<div class="note">
WSL2 環境では Docker Desktop + WSL2 Backend の利用が推奨されます。
</div>

<h3>9.2 Podman（Daemonless）</h3>
<pre><code># インストール
sudo apt install podman

# コンテナ起動
podman run -it alpine sh</code></pre>

<div class="note">
Podman はデーモンレスのため、CI・バッチ用途に向いています。
</div>

<h2>10. rsync を用いたファイル転送</h2>

<h3>10.1 基本構文</h3>
<pre><code>rsync -av src/ dest/</code></pre>

<h3>10.2 Windows → WSL</h3>
<pre><code>rsync -av /mnt/c/work/src/ ~/work/</code></pre>

<h3>10.3 WSL → Windows</h3>
<pre><code>rsync -av ~/work/result/ /mnt/c/work/result/</code></pre>

<div class="note">
大量ファイルや差分転送では cp より rsync を推奨します。
</div>

<h2>11. Zone.Identifier（Windows ADS）対策</h2>

<h3>11.1 問題概要</h3>
<ul>
  <li>Windows から取得したファイルに Zone.Identifier が付与される</li>
  <li>WSL 側で実行不可・ビルドエラーの原因になる</li>
</ul>

<h3>11.2 PowerShell 側での解除</h3>
<pre><code>Unblock-File -Path *.zip</code></pre>

<h3>11.3 WSL 側での削除（ADS削除）</h3>
<pre><code>find . -name '*:Zone.Identifier' -delete</code></pre>

<div class="warn">
Git 管理ファイルやバッチ資材では、Zone.Identifier 混入に特に注意してください。
</div>

<h2>12. Host（Windows）⇔ WSL ファイル転送方法</h2>

<h3>12.1 /mnt 経由（推奨・簡易）</h3>
<ul>
  <li><code>/mnt/c</code> 配下で直接操作</li>
  <li>手軽だが I/O 性能は低め</li>
</ul>

<h3>12.2 \wsl$ 経由（Explorer操作）</h3>
<pre><code>\\wsl$\Ubuntu\home\user</code></pre>

<ul>
  <li>Windows Explorer から WSL ファイル参照可能</li>
  <li>GUI操作向け</li>
</ul>

<h3>12.3 rsync / scp（推奨・運用向け）</h3>
<pre><code>scp file.txt user@localhost:/home/user/</code></pre>

<h3>12.4 アーカイブ転送</h3>
<pre><code>tar czf data.tgz data/
tar xzf data.tgz</code></pre>

<div class="note">
本番・検証資材は rsync + チェックサム確認を推奨します。
</div>

<h2>13. 運用ベストプラクティス</h2>
<ul>
  <li>開発資材は WSL 内（ext4）に配置</li>
  <li>Windows 直下実行は最小限に</li>
  <li>Zone.Identifier 混入チェックを定期実施</li>
</ul>

</body>
</html>
